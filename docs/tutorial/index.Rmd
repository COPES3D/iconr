---
title: "***iconr*** tutorial"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


## Open Image with **QGIS**
  
Open the decoration in QGIS. The width of the image is equivalent to the x-axis, the height of the image is equivalent to the y-axis
  
<center>

![](img/coordsQGIS.gif)

</center>
  
The QGIS coordinates are:

* top-left: origins (0,0)

* top-right: (666,0)

* bottom-right: (666,750)

* bottom-left: (0,750)  
  

<center>

![](img/extentGIS.gif){width=66%}

</center>
  
# Open Image with ***magick*** R package

Read the decoration image with the R magick package and show image proprieties

```{r echo=TRUE, message=FALSE, warning=FALSE}
library(knitr)
library(kableExtra)
library(magick)
path_img <- "D:/Sites_10/Abela/Abela.jpg"
img <- image_read(path_img)
image_info(img)
```

Plot the image
  

```{r echo=TRUE, out.width="60%", fig.width=6, fig.asp=750/666}
plot(image_trim(img))
```

Add the coordinates of the image four corners:

* top-left

* top-right

* bottom-right

* bottom-left

```{r echo=TRUE, out.width="60%", fig.width=6, fig.asp=750/666}
# par(mar = c(0,0,0,0))
plot(img)
box(lwd = 2)
# min width & min height (origin)
text(0, 0, 
     paste0(0, ",", 0),
     cex = 1, adj = c(0, -0.2))
# min width & max height
text(0, image_info(img)$height,
     paste0(0, ",", image_info(img)$height),
     cex = 1, adj = c(0, 1.1))
# max width & min height
text(image_info(img)$width, 0,
     paste0(image_info(img)$width, ",", 0),
     cex = 1, adj = c(1, -0.2))
# max width & max height
text(image_info(img)$width, image_info(img)$height,
     paste0(image_info(img)$width, ",", image_info(img)$height),
     cex = 1, adj = c(1, 1.1))
```

## The two proposed versions

### Thomas

For a given decoration, its image is the reference space of the graph:
nodes and edges inherit their coordinates from the image grid. The package
`iconr` considers the following coordinate conventions:

```{r xy_coords,out.width="50%", fig.align="center",echo=FALSE,warning=FALSE}
df.equi <- data.frame("devices" = c("GIS interface","R grid"),
"units of measures" = c("number of pixels", "number
of pixels"),
"origin corner" = c("top-left", "top-left"),
"x-axis" = c("rightward", "rightward"),
"y-axis" = c("upward", "downward"),
check.names = FALSE)
knitr::kable(df.equi) %>%
kableExtra::add_header_above(c(" " = 1, " " = 1, " " = 1, "axes
orientation" = 2)) %>%
kable_styling(full_width = F)
```

Observe that the y-axis orientation are different between the GIS interface
and R grids. In the GIS the y-axis is oriented upwards (ie, with negative
values downwards), while in a R grid the y-axis is oriented downwards (ie,
with positive values downwards). Then, the heights (ie, y-axis) coming from
the GIS have to be inverted. This can be illustrated with the `magick`
package.

### Jose

For a given decoration, its image is the reference space of the graph:
nodes and edges inherit their coordinates from the image grid. The package
`iconr` considers the following coordinate conventions:

* **Unit of length:** number of pixels.
* **Origin:** top-left corner.
* **Axes orientation:** x-coordinates rightward and y-coordinates upwards.

Observe that the origin and y-axis orientation implies that y-coordinates
are always negative in the image. This follows the same convention as
relative coordinates in GIS, which are referenced to the top left corner of
the local map with upwards y-axis orientation. However, it contrast with
both default R plots (upwards y-axis but bottom-left origin) and `magick`
image package plots (top-left origin but downwards y-axis), for which `y`
values are positive.
